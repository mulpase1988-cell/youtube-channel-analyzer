# .github/workflows/test-config.yml
name: ğŸ§ª config.py í…ŒìŠ¤íŠ¸

on:
  # ìˆ˜ë™ íŠ¸ë¦¬ê±° (GitHub UIì—ì„œ ì‹¤í–‰)
  workflow_dispatch:

  # ë˜ëŠ” main ë¸Œëœì¹˜ì— pushë  ë•Œ ìë™ ì‹¤í–‰
  push:
    branches:
      - main
    paths:
      - 'scripts/config.py'
      - '.github/workflows/test-config.yml'

jobs:
  test-config:
    runs-on: ubuntu-latest
    timeout-minutes: 10

    steps:
      # 1ï¸âƒ£ ì €ì¥ì†Œ ì²´í¬ì•„ì›ƒ
      - name: ğŸ“¥ ì €ì¥ì†Œ ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v4

      # 2ï¸âƒ£ Python ì„¤ì •
      - name: ğŸ Python 3.11 ì„¤ì •
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      # 3ï¸âƒ£ ì˜ì¡´ì„± ì„¤ì¹˜
      - name: ğŸ“¦ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      # 4ï¸âƒ£ config.py í…ŒìŠ¤íŠ¸ (ê°€ì¥ ì¤‘ìš”!)
      - name: ğŸ§ª config.py ë¡œë“œ í…ŒìŠ¤íŠ¸
        run: |
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "ğŸ§ª config.py ê²€ì¦ ì‹œì‘"
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          
          python -c "
          import sys
          sys.path.insert(0, 'scripts')
          from config import *
          
          print('âœ… config.py ë¡œë“œ ì„±ê³µ!')
          print()
          print('ğŸ“Š ì»¬ëŸ¼ ì •ë³´:')
          print(f'  ì´ ì»¬ëŸ¼ ìˆ˜: {len(HEADERS)}')
          print(f'  COL_CHANNEL_NAME: {COL_CHANNEL_NAME}')
          print(f'  COL_URL: {COL_URL}')
          print(f'  COL_HANDLE: {COL_HANDLE}')
          print(f'  COL_CHANNEL_ID: {COL_CHANNEL_ID}')
          print()
          print('ğŸ“ íŒŒì¼ ê²½ë¡œ:')
          print(f'  DATA_DIR: {DATA_DIR}')
          print(f'  CHANNEL_IDS_FILE: {CHANNEL_IDS_FILE}')
          print(f'  YOUTUBE_DATA_FILE: {YOUTUBE_DATA_FILE}')
          print()
          print('ğŸŒ ì§€ì› êµ­ê°€:')
          for code, name in list(COUNTRY_MAP.items())[:5]:
              print(f'  {code}: {name}')
          print(f'  ... ì™¸ {len(COUNTRY_MAP) - 5}ê°œ')
          print()
          print('ğŸ¬ ì§€ì› ì¹´í…Œê³ ë¦¬:')
          print(f'  ì´ {len(CATEGORY_MAP)}ê°œ')
          print()
          print('âœ… ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼!')
          "

      # 5ï¸âƒ£ ìƒì„¸ ë¡œê·¸ (ì„ íƒ)
      - name: ğŸ“‹ ìƒì„¸ ê²€ì¦
        run: python scripts/config.py

      # 6ï¸âƒ£ ê²°ê³¼ ìš”ì•½
      - name: âœ… í…ŒìŠ¤íŠ¸ ì™„ë£Œ
        if: success()
        run: |
          echo ""
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "âœ… config.py í…ŒìŠ¤íŠ¸ ì™„ë£Œ!"
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "ë‹¤ìŒ ë‹¨ê³„: step1_extract_channel_ids.py ì‘ì„±"
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
